<!DOCTYPE html>
<html>
  <head>
    <title>Emberella Cube Component</title>

    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dice.css">
  </head>
  <body>

  <!-- EMBER APP BELOW -->

  <script type="text/x-handlebars">
    <nav>
      <ul>
        <li>{{#link-to 'cube.simple'}}Simple{{/link-to}}</li>
        <li>{{#link-to 'cube.bound'}}Bound{{/link-to}}</li>
        <li>{{#link-to 'cube.word'}}Words{{/link-to}}</li>
        <li>{{#link-to 'cube.picture'}}Pictures{{/link-to}}</li>
        <li>{{#link-to 'cube.fun'}}Fun?{{/link-to}}</li>
      </ul>
    </nav>

    <div id="content">
      {{outlet}}
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="cube/simple">
    <div class="example">
      {{#ella-cube disabled=cubeDisabled}}
        {{ella-cube-face value='A'}}
        {{ella-cube-face value='B'}}
        {{ella-cube-face value='C'}}
        {{ella-cube-face value='D'}}
        {{ella-cube-face value='E'}}
        {{ella-cube-face value='F'}}
      {{/ella-cube}}
    </div>
    <div class="example">
      <p>{{input type="checkbox" checked=cubeDisabled}} <strong>Disable cube?</strong></p>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="cube/bound">
    <div class="example">
      {{#ella-cube value=value}}
        {{ella-cube-face value='1'}}
        {{ella-cube-face value='2'}}
        {{ella-cube-face value='3'}}
        {{ella-cube-face value='4'}}
        {{ella-cube-face value='5'}}
        {{ella-cube-face value='6'}}
      {{/ella-cube}}
    </div>
    <div class="example">
      <p><strong>Value:</strong> {{input value=value}}</p>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="cube/word">
    <div class="example words">
      {{#ella-cube value=value size=300}}
        {{#ella-cube-face value='1'}}One{{/ella-cube-face}}
        {{#ella-cube-face value='2'}}Two{{/ella-cube-face}}
        {{#ella-cube-face value='3'}}Three{{/ella-cube-face}}
        {{#ella-cube-face value='4'}}Four{{/ella-cube-face}}
        {{#ella-cube-face value='5'}}Five{{/ella-cube-face}}
        {{#ella-cube-face value='6'}}Six{{/ella-cube-face}}
      {{/ella-cube}}
    </div>
    <div class="example">
      <p><strong>Value:</strong> {{input value=value}}</p>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="cube/picture">
    <div class="example pictures">
      {{#ella-cube value=value size=300}}
        {{#ella-cube-face value='Ember'}}
          <img src="images/tomster-wave-v2.gif"/>
        {{/ella-cube-face}}
        {{#ella-cube-face value='Broccoli'}}
          <img src="images/broccoli-logo-small.generated.png"/>
        {{/ella-cube-face}}
        {{#ella-cube-face value='Grunt'}}
          <img src="images/grunt.svg"/>
        {{/ella-cube-face}}
        {{#ella-cube-face value='Bower'}}
          <img src="images/bower-logo.png"/>
        {{/ella-cube-face}}
        {{#ella-cube-face value='GitHub'}}
          <img src="images/Octocat.png"/>
        {{/ella-cube-face}}
        {{#ella-cube-face value='Analog'}}
          <img src="images/rubiks-cube.png"/>
        {{/ella-cube-face}}
      {{/ella-cube}}
    </div>
    <div style="text-align: center;">
      <h1>My favorite technology is {{value}}</p>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="cube/fun">
    <div class="dice-example">
      {{app-dice classNames="example dice one" value=roll1 rolls=rolls size=150 rolling=die1state onRoll='captureResult'}}
      {{app-dice classNames="example dice two" value=roll2 rolls=rolls size=150 rolling=die2state onRoll='captureResult'}}
    </div>
    <div class="example">
      {{#unless rolling}}
        <p>Click the dice to roll em</p>
        <p>You rolled a <strong>{{value}}</strong></p>
      {{/unless}}

      <ul>
        {{#each result in results}}
          {{#if result.roll}}
            <li><strong>Roll {{result.roll}}</strong>: {{result.value}}</li>
          {{/if}}
        {{/each}}
      </ul>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="components/app-dice">
    {{#ella-dice value=value rolls=rolls size=size rolling=rolling onRoll=onRoll targetObject=targetObject}}
      {{#ella-cube-face value=1 classNames='one'}}
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
      {{#ella-cube-face value=6 classNames='six'}}
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
      {{#ella-cube-face value=3 classNames="three"}}
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
      {{#ella-cube-face value=4 classNames="four"}}
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
      {{#ella-cube-face value=5 classNames="five"}}
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
      {{#ella-cube-face value=2 classNames="two"}}
        <div class="pip">&bull;</div>
        <div class="pip">&bull;</div>
      {{/ella-cube-face}}
    {{/ella-dice}}
  </script>

  <script src="../bower_components/jquery/dist/jquery.js"></script>
  <script src="../bower_components/handlebars/handlebars.js"></script>
  <script src="../bower_components/ember/ember.js"></script>
  <script src="../bower_components/ic-styled/main.js"></script>
  <!--<script src="../dist/globals/main.js"></script>-->
  <script src="http://localhost:4200/globals/main.js"></script>
  <script src="http://localhost:35729/livereload.js"></script>

  <script>
    var App = Ember.Application.create();

    App.ApplicationController = Ember.Controller.extend({});

    App.CubeSimpleController = Ember.ObjectController.extend({
      cubeDisabled: false
    });

    App.CubeFunController = Ember.ObjectController.extend({
      results: Ember.A(),

      value: function() {
        return this.get('rolling') ? null : parseInt(this.get('roll1'), 10) + parseInt(this.get('roll2'), 10)
      }.property('roll1', 'roll2', 'rolling'),

      rolling: function() {
        return !!(this.get('die1state') || this.get('die2state'));
      }.property('die1state', 'die2state'),

      addResult: function() {
        var roll = this.get('rolls'),
            results = this.get('results');

        if (roll > results.length) {
          this.get('results').unshiftObject({
            roll: this.get('rolls'),
            value: this.get('value')
          });
        }
      },

      actions: {
        captureResult: function() {
          if (!this.get('rolling')) {
            this.addResult();
          }
        }
      }
    });

    App.Router.map(function() {
      this.resource('index', {path: '/'});
      this.resource('cube', function() {
        this.route('simple');
        this.route('bound');
        this.route('word');
        this.route('picture');
        this.route('fun');
      });
    });

    App.ApplicationRoute = Ember.Route.extend({});

    App.IndexRoute = Ember.Route.extend({
      redirect: function() {
        this.transitionTo('cube.simple');
      }
    });

    App.CubeRoute = Ember.Route.extend({});

    App.CubeBoundRoute = Ember.Route.extend({
      model: function() {
        return {value: '1'}
      }
    });

    App.CubeWordRoute = Ember.Route.extend({
      model: function() {
        return {value: '6'}
      }
    });

    App.CubeFunRoute = Ember.Route.extend({
      model: function() {
        return {roll1: 1, roll2: 1}
      }
    });

  </script>
  </body>
</html>
